<!DOCTYPE html>
<html lang="ko">

<head>
    <title>파일 업로드</title>
    <link rel="stylesheet" href="uploadStyle.css">
    <!-- Javascript SDKs-->
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script> 
    <script src="js/amazon-cognito-auth.min.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.16.min.js"></script> 
    <script src="js/amazon-cognito-identity.min.js"></script>  
    <script src="js/config.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-SDK_VERSION_NUMBER.js"></script>
    <script src="js/app.js"></script>
    <script>
        function getHtml(template) {
           return template.join('\n');
        }
        listAlbums();
     </script>
    <meta charset="UTF-8">
    
</head>

<link rel="stylesheet" href="upload.css">

    <body>
        <div class="wrap">
            <div class="daAra-logo">
                <img src="img/daARA logo 1.png" style="max-width: 100%; height: auto;">

            </div>
            <div class="form-wrap">
                <form>
                    <input type="file" id="file" accept="image/*" style="display:none" multiple>
                    <!--업로드파일 이미지로 제한(컴퓨터 자체 판단)-->   
                    <button class="submit2" type="button" style="text-align: center" onclick="onclick=document.all.file.click()">
                        Select a file to upload.
                    </button>
                    <!--<div class="margin1"></div>-->
                    <div class="drop-zone">
                        or drag the file here.
                    </div>
                    <div class="margin2"></div>
                    <button class="submit" type="button"  onclick="onclick=alert('파일이 업로드 되었습니다.')">Upload</button>
                </form>


            </div>

            
        </div>
        
        
       

    <script>
        
        (function() {
            
            var $file = document.getElementById("file")
            var dropZone = document.querySelector(".drop-zone")

            var toggleClass = function(className) {
                
                console.log("current event: " + className)

                var list = ["dragenter", "dragleave", "dragover", "drop"]

                for (var i = 0; i < list.length; i++) {
                    if (className === list[i]) {
                        dropZone.classList.add("drop-zone-" + list[i])
                    } else {
                        dropZone.classList.remove("drop-zone-" + list[i])
                    }
                }
            }
            
            var showFiles = function(files) {
                dropZone.innerHTML = ""
                for(var i = 0, len = files.length; i < len; i++) {
                    dropZone.innerHTML += "<p>" + (i+1) + ". " + files[i].name + "</p>"
                }
            }

            var selectFile = function(files) {
                // input file 영역에 드랍된 파일들로 대체
                $file.files = files
                showFiles($file.files)
            }
            
            $file.addEventListener("change", function(e) {
                showFiles(e.target.files)
            })

            // 드래그한 파일이 최초로 진입했을 때
            dropZone.addEventListener("dragenter", function(e) {
                e.stopPropagation()
                e.preventDefault()

                toggleClass("dragenter")
            })

            // 드래그한 파일이 dropZone 영역을 벗어났을 때
            dropZone.addEventListener("dragleave", function(e) {
                e.stopPropagation()
                e.preventDefault()

                toggleClass("dragleave")
            })

            // 드래그한 파일이 dropZone 영역에 머물러 있을 때
            dropZone.addEventListener("dragover", function(e) {
                e.stopPropagation()
                e.preventDefault()

                toggleClass("dragover")

            })

            // 드래그한 파일이 드랍되었을 때
            dropZone.addEventListener("drop", function(e) {
                e.preventDefault()

                toggleClass("drop")

                var files = e.dataTransfer && e.dataTransfer.files
                console.log(files)
                alert(files.length + " files dragged")

                if (files != null) {
                    if (files.length < 1) {
                        alert("폴더 업로드 불가")
                        return
                    }
                    selectFile(files)
                } else {
                    alert("ERROR")
                }
            })
        })()
    </script>

</body></html>
